2025-05-18 10:35:53.476 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 10:35:53.495 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 8966 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 10:35:53.495 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 10:35:53.495 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 10:35:53.875 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 10:35:53.879 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 10:35:53.879 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 10:35:53.879 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 10:35:53.922 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 10:35:53.922 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 405 ms
2025-05-18 10:35:53.941 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 10:35:53.952 [main] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务初始化完成, 服务器地址: ws://127.0.0.1:10096
2025-05-18 10:35:53.955 [main] INFO  c.r.s.e.lm.LargeLanguageModelClient - 初始化大语言模型客户端, 服务器地址: http://127.0.0.1:11434, 模型: qwen2.5:14b
2025-05-18 10:35:54.047 [main] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM服务初始化完成, 服务器地址: http://127.0.0.1:11434, 模型: qwen2.5:14b
2025-05-18 10:35:54.156 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-05-18 10:35:54.200 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-18 10:35:54.216 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/robotplatform'
2025-05-18 10:35:54.220 [main] INFO  c.r.start.RobotPlatformApplication - Started RobotPlatformApplication in 0.98 seconds (process running for 1.233)
2025-05-18 10:35:59.246 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LangChain4j LLM服务已关闭
2025-05-18 10:35:59.247 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务已关闭
2025-05-18 10:39:35.757 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 10:39:35.774 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 9156 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 10:39:35.774 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 10:39:35.774 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 10:39:36.141 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 10:39:36.144 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 10:39:36.145 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 10:39:36.145 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 10:39:36.182 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 10:39:36.183 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 390 ms
2025-05-18 10:39:36.204 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 10:39:36.216 [main] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务初始化完成, 服务器地址: ws://192.168.0.103:10096
2025-05-18 10:39:36.219 [main] INFO  c.r.s.e.lm.LargeLanguageModelClient - 初始化大语言模型客户端, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 10:39:36.305 [main] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM服务初始化完成, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 10:39:36.381 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-05-18 10:39:36.428 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-18 10:39:36.444 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/robotplatform'
2025-05-18 10:39:36.448 [main] INFO  c.r.start.RobotPlatformApplication - Started RobotPlatformApplication in 0.933 seconds (process running for 1.157)
2025-05-18 10:40:20.385 [http-nio-8080-exec-7] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 10:40:20.386 [http-nio-8080-exec-7] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 10:40:20.387 [http-nio-8080-exec-7] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-18 10:40:20.496 [http-nio-8080-exec-8] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 10:40:22.521 [http-nio-8080-exec-10] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: a663c677-494f-4010-aa41-24b0f92a6b70, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-a663c677-494f-4010-aa41-24b0f92a6b70","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"阿里巴巴\":20,\"hello world\":40}"}
2025-05-18 10:40:22.521 [http-nio-8080-exec-10] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-a663c677-494f-4010-aa41-24b0f92a6b70, FunASR会话ID: a663c677-494f-4010-aa41-24b0f92a6b70
2025-05-18 10:40:22.522 [http-nio-8080-exec-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-a663c677-494f-4010-aa41-24b0f92a6b70
2025-05-18 10:40:40.409 [WebSocketClient-AsyncIO-11] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=你好，请帮我处理违章，我试试这个能不能管用啊，我我又拨了一下那个
2025-05-18 10:41:25.425 [WebSocketClient-AsyncIO-11] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
你好，请帮我处理违章，我试试这个能不能管用啊，我我又拨了一下那个, 输出：处理交通违法记录查询与处理
2025-05-18 10:41:25.426 [WebSocketClient-AsyncIO-11] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 你好，请帮我处理违章，我试试这个能不能管用啊，我我又拨了一下那个, 优化后: 处理交通违法记录查询与处理
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=啊
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=啊
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=啊
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:41:25.441 [WebSocketClient-AsyncIO-11] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，我觉得这个有刻字写写，肯定就写完了
2025-05-18 10:41:25.442 [WebSocketClient-AsyncIO-11] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:41:26.804 [pool-4-thread-1] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录查询与处理, 输出：您好！您可以直接在我这里输入您的车辆号牌或驾驶证号码进行违法记录的查询。如果需要处理违法行为，请提供详细的违法记录编号，并告诉我您想选择的处理方式，比如缴纳罚款等。如果有任何疑问，也可以随时问我哦。请确保提供的信息准确无误。
2025-05-18 10:41:26.805 [pool-4-thread-1] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录查询与处理

助手: 您好！您可以直接在我这里输入您的车辆号牌或驾驶证号码进行违法记录的查询。如果需要处理违法行为，请提供详细的违法记录编号，并告诉我您想选择的处理方式，比如缴纳罚款等。如果有任何疑问，也可以随时问我哦。请确保提供的信息准确无误。, 响应: 您好！您可以直接在我这里输入您的车辆号牌或驾驶证号码进行违法记录的查询。如果需要处理违法行为，请提供详细的违法记录编号，并告诉我您想选择的处理方式，比如缴纳罚款等。如果有任何疑问，也可以随时问我哦。请确保提供的信息准确无误。
2025-05-18 10:41:26.806 [pool-4-thread-1] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 您好！您可以直接在我这里输入您的车辆号牌或驾驶证号码进行违法记录的查询。如果需要处理违法行为，请提供详细的违法记录编号，并告诉我您想选择的处理方式，比如缴纳罚款等。如果有任何疑问，也可以随时问我哦。请确保提供的信息准确无误。
2025-05-18 10:41:26.810 [pool-4-thread-1] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 您好！您可以直接在我这里输入您的车辆号牌或驾驶证号码进行违法记录的查询。如果需要处理违法行为，请提供详细的违法记录编号，并告诉我您想选择的处理方式，比如缴纳罚款等。如果有任何疑问，也可以随时问我哦。请确保提供的信息准确无误。, 说话人ID: 中文女,sessionId:voice
2025-05-18 10:41:31.824 [pool-4-thread-1] ERROR c.r.s.e.cosyvoice.CosyVoiceClient - 流式语音合成失败
java.util.concurrent.TimeoutException: null
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:2004)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2139)
	at org.springframework.util.concurrent.CompletableToListenableFutureAdapter.get(CompletableToListenableFutureAdapter.java:106)
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.createSession(CosyVoiceClient.java:226)
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.synthesizeSpeechStream(CosyVoiceClient.java:157)
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.synthesizeSpeechStream(CosyVoiceClient.java:119)
	at com.robotplatform.service.impl.CosyVoiceTextToSpeechServiceImpl.synthesizeSpeech(CosyVoiceTextToSpeechServiceImpl.java:33)
	at com.robotplatform.service.impl.VoiceDialogServiceImpl.generateAndSendSpeechResponse(VoiceDialogServiceImpl.java:539)
	at com.robotplatform.service.impl.VoiceDialogServiceImpl.lambda$handleTranscriptionResult$1(VoiceDialogServiceImpl.java:380)
	at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire$$$capture(CompletableFuture.java:762)
	at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:554)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1817)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-18 10:41:31.828 [pool-4-thread-1] ERROR c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 语音合成失败
java.lang.RuntimeException: 流式语音合成失败
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.synthesizeSpeechStream(CosyVoiceClient.java:174)
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.synthesizeSpeechStream(CosyVoiceClient.java:119)
	at com.robotplatform.service.impl.CosyVoiceTextToSpeechServiceImpl.synthesizeSpeech(CosyVoiceTextToSpeechServiceImpl.java:33)
	at com.robotplatform.service.impl.VoiceDialogServiceImpl.generateAndSendSpeechResponse(VoiceDialogServiceImpl.java:539)
	at com.robotplatform.service.impl.VoiceDialogServiceImpl.lambda$handleTranscriptionResult$1(VoiceDialogServiceImpl.java:380)
	at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire$$$capture(CompletableFuture.java:762)
	at java.base/java.util.concurrent.CompletableFuture$UniAccept.tryFire(CompletableFuture.java)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:554)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1817)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: java.util.concurrent.TimeoutException: null
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:2004)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2139)
	at org.springframework.util.concurrent.CompletableToListenableFutureAdapter.get(CompletableToListenableFutureAdapter.java:106)
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.createSession(CosyVoiceClient.java:226)
	at com.robotplatform.service.external.cosyvoice.CosyVoiceClient.synthesizeSpeechStream(CosyVoiceClient.java:157)
	... 12 common frames omitted
2025-05-18 10:41:47.164 [WebSocketClient-AsyncIO-4] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=。嗯，上下文的这个是吧
2025-05-18 10:41:47.166 [WebSocketClient-AsyncIO-4] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:41:50.375 [WebSocketClient-AsyncIO-6] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯嗯
2025-05-18 10:41:50.376 [WebSocketClient-AsyncIO-6] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:41:59.072 [WebSocketClient-AsyncIO-7] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，对
2025-05-18 10:41:59.073 [WebSocketClient-AsyncIO-7] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:42:07.580 [WebSocketClient-AsyncIO-8] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，嗯
2025-05-18 10:42:07.581 [WebSocketClient-AsyncIO-8] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:42:16.279 [WebSocketClient-AsyncIO-11] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯嗯嗯
2025-05-18 10:42:16.281 [WebSocketClient-AsyncIO-11] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:42:28.003 [WebSocketClient-AsyncIO-2] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，不理解
2025-05-18 10:42:28.004 [WebSocketClient-AsyncIO-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:42:38.024 [WebSocketClient-AsyncIO-3] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=是是是
2025-05-18 10:42:38.025 [WebSocketClient-AsyncIO-3] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:43:00.696 [WebSocketClient-AsyncIO-8] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，操，我感觉他这个写的很复杂呀
2025-05-18 10:43:00.698 [WebSocketClient-AsyncIO-8] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:43:03.620 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，是吧
2025-05-18 10:43:03.621 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:43:15.678 [WebSocketClient-AsyncIO-6] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=？嗯，我发现他这个写的有点复杂，我操贼贼贼复杂，感觉
2025-05-18 10:43:15.680 [WebSocketClient-AsyncIO-6] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:43:20.990 [WebSocketClient-AsyncIO-7] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 10:43:20.991 [WebSocketClient-AsyncIO-7] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:43:26.416 [WebSocketClient-AsyncIO-9] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=是不是
2025-05-18 10:43:26.417 [WebSocketClient-AsyncIO-9] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:43:44.049 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 10:43:44.050 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:43:50.215 [WebSocketClient-AsyncIO-2] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯嗯
2025-05-18 10:43:50.216 [WebSocketClient-AsyncIO-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:44:15.799 [WebSocketClient-AsyncIO-1] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 10:44:15.800 [WebSocketClient-AsyncIO-1] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:44:31.522 [WebSocketClient-AsyncIO-7] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=草味草味对草味填充
2025-05-18 10:44:31.523 [WebSocketClient-AsyncIO-7] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:44:44.718 [WebSocketClient-AsyncIO-2] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=。对对对，这个看起来观赏性比刚才那个好很多
2025-05-18 10:44:44.722 [WebSocketClient-AsyncIO-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:44:51.926 [WebSocketClient-AsyncIO-3] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=。是的是的
2025-05-18 10:44:51.927 [WebSocketClient-AsyncIO-3] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:44:58.841 [WebSocketClient-AsyncIO-5] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，对对对对对
2025-05-18 10:44:58.842 [WebSocketClient-AsyncIO-5] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 10:45:10.831 [WebSocketClient-AsyncIO-6] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 10:45:10.831 [WebSocketClient-AsyncIO-6] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:45:32.114 [WebSocketClient-AsyncIO-8] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 10:45:32.115 [WebSocketClient-AsyncIO-8] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:45:53.096 [WebSocketClient-AsyncIO-9] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 10:45:53.097 [WebSocketClient-AsyncIO-9] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 10:46:04.221 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_104022.wav, 总数据大小: 5140928 字节
2025-05-18 10:46:04.222 [SpringApplicationShutdownHook] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: a663c677-494f-4010-aa41-24b0f92a6b70
2025-05-18 10:46:04.222 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-a663c677-494f-4010-aa41-24b0f92a6b70, FunASR会话ID: a663c677-494f-4010-aa41-24b0f92a6b70
2025-05-18 10:46:04.222 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 10:46:04.222 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 10:46:04.222 [SpringApplicationShutdownHook] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1001, 原因: The web application is stopping, 当前连接数: 0
2025-05-18 10:46:04.230 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LangChain4j LLM服务已关闭
2025-05-18 10:46:04.231 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务已关闭
2025-05-18 10:46:06.981 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 10:46:06.997 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 9521 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 10:46:06.998 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 10:46:06.998 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 10:46:07.369 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 10:46:07.372 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 10:46:07.373 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 10:46:07.373 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 10:46:07.405 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 10:46:07.405 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 387 ms
2025-05-18 10:46:07.429 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 10:46:07.437 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cosyVoiceClient': Unsatisfied dependency expressed through field 'config': Error creating bean with name 'cosyVoiceConfig': Unsatisfied dependency expressed through field 'port': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "robotplatform.cosyvoice.server.port"
2025-05-18 10:46:07.438 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-18 10:46:07.445 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-18 10:46:07.454 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cosyVoiceClient': Unsatisfied dependency expressed through field 'config': Error creating bean with name 'cosyVoiceConfig': Unsatisfied dependency expressed through field 'port': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "robotplatform.cosyvoice.server.port"
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:747)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.robotplatform.start.RobotPlatformApplication.main(RobotPlatformApplication.java:15)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cosyVoiceConfig': Unsatisfied dependency expressed through field 'port': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "robotplatform.cosyvoice.server.port"
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:747)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1417)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:764)
	... 20 common frames omitted
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "robotplatform.cosyvoice.server.port"
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:79)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1365)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:764)
	... 34 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "robotplatform.cosyvoice.server.port"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Integer.parseInt(Integer.java:588)
	at java.base/java.lang.Integer.valueOf(Integer.java:935)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:203)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:426)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:399)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	... 37 common frames omitted
2025-05-18 11:03:54.433 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 11:03:54.449 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 10469 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 11:03:54.449 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 11:03:54.449 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 11:03:54.803 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 11:03:54.806 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 11:03:54.807 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 11:03:54.807 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 11:03:54.845 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 11:03:54.845 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 378 ms
2025-05-18 11:03:54.864 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 11:03:54.936 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'difyApiManager': Injection of resource dependencies failed
2025-05-18 11:03:54.939 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-18 11:03:54.946 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-18 11:03:54.952 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'difyApiManager': Injection of resource dependencies failed
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:323)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.robotplatform.start.RobotPlatformApplication.main(RobotPlatformApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'parametersApi': Injection of autowired dependencies failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeanByName(AbstractAutowireCapableBeanFactory.java:457)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:537)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:508)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:659)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:270)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:320)
	... 17 common frames omitted
Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'dify.api.base-url' in value "${dify.api.base-url}"
	at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:180)
	at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)
	at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:239)
	at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:210)
	at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:918)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:764)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:747)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	... 31 common frames omitted
2025-05-18 11:05:38.916 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 11:05:38.932 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 10552 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 11:05:38.932 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 11:05:38.932 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 11:05:39.393 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 11:05:39.398 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 11:05:39.399 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 11:05:39.399 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 11:05:39.455 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 11:05:39.456 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 505 ms
2025-05-18 11:05:39.485 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 11:05:39.565 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'difyApiManager': Injection of resource dependencies failed
2025-05-18 11:05:39.566 [main] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-05-18 11:05:39.573 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-18 11:05:39.579 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'difyApiManager': Injection of resource dependencies failed
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:323)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.robotplatform.start.RobotPlatformApplication.main(RobotPlatformApplication.java:15)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'conversationsDetailApi': Injection of autowired dependencies failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeanByName(AbstractAutowireCapableBeanFactory.java:457)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:537)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:508)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:659)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:270)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:320)
	... 17 common frames omitted
Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'dify.api.base-url' in value "${dify.api.base-url}"
	at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:180)
	at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)
	at org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:239)
	at org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:210)
	at org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:918)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1358)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:764)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:747)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492)
	... 31 common frames omitted
2025-05-18 11:06:16.439 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 11:06:16.456 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 10598 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 11:06:16.456 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 11:06:16.456 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 11:06:16.811 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 11:06:16.814 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 11:06:16.815 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 11:06:16.815 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 11:06:16.852 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 11:06:16.852 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 378 ms
2025-05-18 11:06:16.870 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 11:06:16.951 [main] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务初始化完成, 服务器地址: ws://192.168.0.103:10096
2025-05-18 11:06:16.957 [main] INFO  c.r.s.e.lm.LargeLanguageModelClient - 初始化大语言模型客户端, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:06:16.972 [main] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM服务初始化完成, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:06:17.034 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-05-18 11:06:17.073 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-18 11:06:17.087 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/robotplatform'
2025-05-18 11:06:17.091 [main] INFO  c.r.start.RobotPlatformApplication - Started RobotPlatformApplication in 0.889 seconds (process running for 1.093)
2025-05-18 11:06:20.992 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 11:06:20.993 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 11:06:20.993 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-05-18 11:06:21.206 [http-nio-8080-exec-2] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:07:30.358 [http-nio-8080-exec-7] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: 5a55b9d2-eb54-4907-97ab-b2776fee2b29, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-5a55b9d2-eb54-4907-97ab-b2776fee2b29","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"阿里巴巴\":20,\"hello world\":40}"}
2025-05-18 11:07:30.359 [http-nio-8080-exec-7] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-5a55b9d2-eb54-4907-97ab-b2776fee2b29, FunASR会话ID: 5a55b9d2-eb54-4907-97ab-b2776fee2b29
2025-05-18 11:07:30.359 [http-nio-8080-exec-7] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-5a55b9d2-eb54-4907-97ab-b2776fee2b29
2025-05-18 11:07:38.212 [WebSocketClient-AsyncIO-6] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=你好，请帮我处理违章
2025-05-18 11:07:42.432 [WebSocketClient-AsyncIO-6] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
你好，请帮我处理违章, 输出：处理交通违法记录
2025-05-18 11:07:42.432 [WebSocketClient-AsyncIO-6] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 你好，请帮我处理违章, 优化后: 处理交通违法记录
2025-05-18 11:07:43.884 [pool-4-thread-1] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录, 输出：您好！处理交通违法记录的话，请提供您的驾驶证号码或车辆识别代码。我将帮您查询可处理的违法记录详情及所需材料。

如果已经有具体的违法行为需要处理，可以告诉我违法记录编号，我可以指导您如何进行网上缴款或其他方式处理。请告知具体信息以便于操作。
2025-05-18 11:07:43.885 [pool-4-thread-1] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录

助手: 您好！处理交通违法记录的话，请提供您的驾驶证号码或车辆识别代码。我将帮您查询可处理的违法记录详情及所需材料。

如果已经有具体的违法行为需要处理，可以告诉我违法记录编号，我可以指导您如何进行网上缴款或其他方式处理。请告知具体信息以便于操作。, 响应: 您好！处理交通违法记录的话，请提供您的驾驶证号码或车辆识别代码。我将帮您查询可处理的违法记录详情及所需材料。

如果已经有具体的违法行为需要处理，可以告诉我违法记录编号，我可以指导您如何进行网上缴款或其他方式处理。请告知具体信息以便于操作。
2025-05-18 11:07:43.885 [pool-4-thread-1] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 您好！处理交通违法记录的话，请提供您的驾驶证号码或车辆识别代码。我将帮您查询可处理的违法记录详情及所需材料。

如果已经有具体的违法行为需要处理，可以告诉我违法记录编号，我可以指导您如何进行网上缴款或其他方式处理。请告知具体信息以便于操作。
2025-05-18 11:07:43.888 [pool-4-thread-1] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 您好！处理交通违法记录的话，请提供您的驾驶证号码或车辆识别代码。我将帮您查询可处理的违法记录详情及所需材料。

如果已经有具体的违法行为需要处理，可以告诉我违法记录编号，我可以指导您如何进行网上缴款或其他方式处理。请告知具体信息以便于操作。, 说话人ID: 1,sessionId:voice
2025-05-18 11:07:44.377 [SimpleAsyncTaskExecutor-1] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已建立, 会话ID: cosyvoice-1747537663888
2025-05-18 11:07:44.570 [WebSocketClient-AsyncIO-11] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已关闭, 会话ID: cosyvoice-1747537663888, 状态: CloseStatus[code=1000, reason=null]
2025-05-18 11:08:15.240 [http-nio-8080-exec-6] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_110730.wav, 总数据大小: 677248 字节
2025-05-18 11:08:15.248 [http-nio-8080-exec-6] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: 5a55b9d2-eb54-4907-97ab-b2776fee2b29
2025-05-18 11:08:15.248 [http-nio-8080-exec-6] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-5a55b9d2-eb54-4907-97ab-b2776fee2b29, FunASR会话ID: 5a55b9d2-eb54-4907-97ab-b2776fee2b29
2025-05-18 11:08:15.249 [http-nio-8080-exec-6] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:08:15.249 [http-nio-8080-exec-6] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:08:15.249 [http-nio-8080-exec-6] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1000, 原因: 页面关闭, 当前连接数: 0
2025-05-18 11:08:15.442 [http-nio-8080-exec-7] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:08:16.795 [http-nio-8080-exec-10] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: fde5c9b0-239a-497a-a3c3-7f9a2d191d7a, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-fde5c9b0-239a-497a-a3c3-7f9a2d191d7a","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"阿里巴巴\":20,\"hello world\":40}"}
2025-05-18 11:08:16.796 [http-nio-8080-exec-10] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-fde5c9b0-239a-497a-a3c3-7f9a2d191d7a, FunASR会话ID: fde5c9b0-239a-497a-a3c3-7f9a2d191d7a
2025-05-18 11:08:16.796 [http-nio-8080-exec-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-fde5c9b0-239a-497a-a3c3-7f9a2d191d7a
2025-05-18 11:08:23.932 [WebSocketClient-AsyncIO-8] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=你好，请帮我处理违章
2025-05-18 11:08:24.272 [WebSocketClient-AsyncIO-8] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
你好，请帮我处理违章, 输出：处理交通违法记录
2025-05-18 11:08:24.272 [WebSocketClient-AsyncIO-8] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 你好，请帮我处理违章, 优化后: 处理交通违法记录
2025-05-18 11:08:26.880 [pool-4-thread-2] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录, 输出：您好！处理交通违法记录请携带好您的驾驶证和行驶证。如果需要查询具体的违法详情或办理相关手续，请提供证件号码以便进一步指导。

如需网上自助处理，请下载并登录“交管12123”APP，按照提示进行操作即可完成罚款缴纳等流程。

具体步骤如下：
1. 注册并登录“交管12123”；
2. 选择【违法处理】功能；
3. 输入车辆信息查询违法记录；
4. 对确认无误的违法行为在线支付罚金。
如有疑问或遇到问题，欢迎咨询人工服务。
2025-05-18 11:08:26.881 [pool-4-thread-2] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录

助手: 您好！处理交通违法记录请携带好您的驾驶证和行驶证。如果需要查询具体的违法详情或办理相关手续，请提供证件号码以便进一步指导。

如需网上自助处理，请下载并登录“交管12123”APP，按照提示进行操作即可完成罚款缴纳等流程。

具体步骤如下：
1. 注册并登录“交管12123”；
2. 选择【违法处理】功能；
3. 输入车辆信息查询违法记录；
4. 对确认无误的违法行为在线支付罚金。
如有疑问或遇到问题，欢迎咨询人工服务。, 响应: 您好！处理交通违法记录请携带好您的驾驶证和行驶证。如果需要查询具体的违法详情或办理相关手续，请提供证件号码以便进一步指导。

如需网上自助处理，请下载并登录“交管12123”APP，按照提示进行操作即可完成罚款缴纳等流程。

具体步骤如下：
1. 注册并登录“交管12123”；
2. 选择【违法处理】功能；
3. 输入车辆信息查询违法记录；
4. 对确认无误的违法行为在线支付罚金。
如有疑问或遇到问题，欢迎咨询人工服务。
2025-05-18 11:08:26.881 [pool-4-thread-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 您好！处理交通违法记录请携带好您的驾驶证和行驶证。如果需要查询具体的违法详情或办理相关手续，请提供证件号码以便进一步指导。

如需网上自助处理，请下载并登录“交管12123”APP，按照提示进行操作即可完成罚款缴纳等流程。

具体步骤如下：
1. 注册并登录“交管12123”；
2. 选择【违法处理】功能；
3. 输入车辆信息查询违法记录；
4. 对确认无误的违法行为在线支付罚金。
如有疑问或遇到问题，欢迎咨询人工服务。
2025-05-18 11:08:26.882 [pool-4-thread-2] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 您好！处理交通违法记录请携带好您的驾驶证和行驶证。如果需要查询具体的违法详情或办理相关手续，请提供证件号码以便进一步指导。

如需网上自助处理，请下载并登录“交管12123”APP，按照提示进行操作即可完成罚款缴纳等流程。

具体步骤如下：
1. 注册并登录“交管12123”；
2. 选择【违法处理】功能；
3. 输入车辆信息查询违法记录；
4. 对确认无误的违法行为在线支付罚金。
如有疑问或遇到问题，欢迎咨询人工服务。, 说话人ID: 1,sessionId:voice
2025-05-18 11:08:48.961 [http-nio-8080-exec-2] ERROR c.r.s.i.FunASRSpeechToTextServiceImpl - 发送音频数据失败, 会话ID: asr-fde5c9b0-239a-497a-a3c3-7f9a2d191d7a
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1245)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.binaryPartialStart(WsRemoteEndpointImplBase.java:1200)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialBytes(WsRemoteEndpointImplBase.java:163)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendBinary(WsRemoteEndpointBasic.java:54)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendBinaryMessage(StandardWebSocketSession.java:220)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:111)
	at com.robotplatform.service.external.funasr.FunasrClient.sendAudioData(FunasrClient.java:71)
	at com.robotplatform.service.impl.FunASRSpeechToTextServiceImpl.sendAudioData(FunASRSpeechToTextServiceImpl.java:91)
	at com.robotplatform.service.impl.VoiceDialogServiceImpl.processAudioMessage(VoiceDialogServiceImpl.java:291)
	at com.robotplatform.service.impl.VoiceDialogServiceImpl.processVoiceMessage(VoiceDialogServiceImpl.java:77)
	at com.robotplatform.web.websocket.VoiceDialogWebSocketHandler.handleTextMessage(VoiceDialogWebSocketHandler.java:113)
	at org.springframework.web.socket.handler.AbstractWebSocketHandler.handleMessage(AbstractWebSocketHandler.java:43)
	at org.springframework.web.socket.handler.WebSocketHandlerDecorator.handleMessage(WebSocketHandlerDecorator.java:75)
	at org.springframework.web.socket.handler.LoggingWebSocketHandlerDecorator.handleMessage(LoggingWebSocketHandlerDecorator.java:56)
	at org.springframework.web.socket.handler.ExceptionWebSocketHandlerDecorator.handleMessage(ExceptionWebSocketHandlerDecorator.java:58)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter.handleTextMessage(StandardWebSocketHandlerAdapter.java:113)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:84)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketHandlerAdapter$3.onMessage(StandardWebSocketHandlerAdapter.java:81)
	at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:390)
	at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:130)
	at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:484)
	at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:284)
	at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:130)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:85)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:184)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:164)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:152)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-05-18 11:08:48.998 [SimpleAsyncTaskExecutor-1] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已建立, 会话ID: cosyvoice-1747537706883
2025-05-18 11:08:49.065 [WebSocketClient-AsyncIO-2] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已关闭, 会话ID: cosyvoice-1747537706883, 状态: CloseStatus[code=1000, reason=null]
2025-05-18 11:09:52.391 [WebSocketClient-AsyncIO-3] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=去
2025-05-18 11:09:52.392 [WebSocketClient-AsyncIO-3] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 11:10:14.695 [WebSocketClient-AsyncIO-5] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=对
2025-05-18 11:10:14.696 [WebSocketClient-AsyncIO-5] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 11:10:24.272 [WebSocketClient-AsyncIO-9] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯，行行行行行啊
2025-05-18 11:10:24.273 [WebSocketClient-AsyncIO-9] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 11:10:29.601 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，这个有点好嘞
2025-05-18 11:10:29.603 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 未检测到触发词，忽略结果, 会话ID: voice
2025-05-18 11:10:42.043 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_110816.wav, 总数据大小: 2185664 字节
2025-05-18 11:10:42.043 [SpringApplicationShutdownHook] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: fde5c9b0-239a-497a-a3c3-7f9a2d191d7a
2025-05-18 11:10:42.043 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-fde5c9b0-239a-497a-a3c3-7f9a2d191d7a, FunASR会话ID: fde5c9b0-239a-497a-a3c3-7f9a2d191d7a
2025-05-18 11:10:42.044 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:10:42.044 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:10:42.044 [SpringApplicationShutdownHook] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1001, 原因: The web application is stopping, 当前连接数: 0
2025-05-18 11:10:42.058 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LangChain4j LLM服务已关闭
2025-05-18 11:10:42.059 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务已关闭
2025-05-18 11:10:48.483 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 11:10:48.501 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 10841 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 11:10:48.501 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 11:10:48.502 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 11:10:48.867 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 11:10:48.870 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 11:10:48.871 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 11:10:48.871 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 11:10:48.907 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 11:10:48.907 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 383 ms
2025-05-18 11:10:48.925 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 11:10:49.009 [main] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务初始化完成, 服务器地址: ws://192.168.0.103:10096
2025-05-18 11:10:49.012 [main] INFO  c.r.s.e.lm.LargeLanguageModelClient - 初始化大语言模型客户端, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:10:49.031 [main] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM服务初始化完成, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:10:49.098 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-05-18 11:10:49.133 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-18 11:10:49.148 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/robotplatform'
2025-05-18 11:10:49.152 [main] INFO  c.r.start.RobotPlatformApplication - Started RobotPlatformApplication in 0.963 seconds (process running for 1.197)
2025-05-18 11:10:49.183 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 11:10:49.183 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 11:10:49.184 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-18 11:10:49.204 [http-nio-8080-exec-1] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:10:49.439 [http-nio-8080-exec-2] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: 404e4acc-4647-468b-b767-a0ce3679ea8b, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-404e4acc-4647-468b-b767-a0ce3679ea8b","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"hello world\":40,\"阿里巴巴\":20}"}
2025-05-18 11:10:49.439 [http-nio-8080-exec-2] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-404e4acc-4647-468b-b767-a0ce3679ea8b, FunASR会话ID: 404e4acc-4647-468b-b767-a0ce3679ea8b
2025-05-18 11:10:49.439 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-404e4acc-4647-468b-b767-a0ce3679ea8b
2025-05-18 11:10:53.905 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_111049.wav, 总数据大小: 123136 字节
2025-05-18 11:10:53.907 [http-nio-8080-exec-2] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: 404e4acc-4647-468b-b767-a0ce3679ea8b
2025-05-18 11:10:53.907 [http-nio-8080-exec-2] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-404e4acc-4647-468b-b767-a0ce3679ea8b, FunASR会话ID: 404e4acc-4647-468b-b767-a0ce3679ea8b
2025-05-18 11:10:53.907 [http-nio-8080-exec-2] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:10:53.907 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:10:53.908 [http-nio-8080-exec-2] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1000, 原因: 页面关闭, 当前连接数: 0
2025-05-18 11:10:54.123 [http-nio-8080-exec-5] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:10:55.702 [http-nio-8080-exec-3] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: 982810af-160c-4af1-9bc9-146d2c3cd24f, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-982810af-160c-4af1-9bc9-146d2c3cd24f","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"hello world\":40,\"阿里巴巴\":20}"}
2025-05-18 11:10:55.702 [http-nio-8080-exec-3] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-982810af-160c-4af1-9bc9-146d2c3cd24f, FunASR会话ID: 982810af-160c-4af1-9bc9-146d2c3cd24f
2025-05-18 11:10:55.703 [http-nio-8080-exec-3] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-982810af-160c-4af1-9bc9-146d2c3cd24f
2025-05-18 11:11:04.707 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=你好，请帮我处理违章
2025-05-18 11:11:05.119 [WebSocketClient-AsyncIO-10] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
你好，请帮我处理违章, 输出：处理交通违法记录
2025-05-18 11:11:05.119 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 你好，请帮我处理违章, 优化后: 处理交通违法记录
2025-05-18 11:11:06.445 [pool-4-thread-1] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录, 输出：您好！请您提供车辆的号牌号码和发动机号后六位数字，以便查询您的交通违法记录。如果需要处理违法记录，请告知我具体的违法编号或违法地点、时间等信息，我会为您指导下一步操作。如果有疑问或其他需求，请随时告诉我。
2025-05-18 11:11:06.446 [pool-4-thread-1] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录

助手: 您好！请您提供车辆的号牌号码和发动机号后六位数字，以便查询您的交通违法记录。如果需要处理违法记录，请告知我具体的违法编号或违法地点、时间等信息，我会为您指导下一步操作。如果有疑问或其他需求，请随时告诉我。, 响应: 您好！请您提供车辆的号牌号码和发动机号后六位数字，以便查询您的交通违法记录。如果需要处理违法记录，请告知我具体的违法编号或违法地点、时间等信息，我会为您指导下一步操作。如果有疑问或其他需求，请随时告诉我。
2025-05-18 11:11:06.446 [pool-4-thread-1] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 您好！请您提供车辆的号牌号码和发动机号后六位数字，以便查询您的交通违法记录。如果需要处理违法记录，请告知我具体的违法编号或违法地点、时间等信息，我会为您指导下一步操作。如果有疑问或其他需求，请随时告诉我。
2025-05-18 11:11:06.449 [pool-4-thread-1] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 您好！请您提供车辆的号牌号码和发动机号后六位数字，以便查询您的交通违法记录。如果需要处理违法记录，请告知我具体的违法编号或违法地点、时间等信息，我会为您指导下一步操作。如果有疑问或其他需求，请随时告诉我。, 说话人ID: 1,sessionId:voice
2025-05-18 11:11:06.496 [SimpleAsyncTaskExecutor-1] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已建立, 会话ID: cosyvoice-1747537866449
2025-05-18 11:11:06.555 [WebSocketClient-AsyncIO-3] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已关闭, 会话ID: cosyvoice-1747537866449, 状态: CloseStatus[code=1000, reason=null]
2025-05-18 11:14:27.377 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_111055.wav, 总数据大小: 3182296 字节
2025-05-18 11:14:27.380 [SpringApplicationShutdownHook] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: 982810af-160c-4af1-9bc9-146d2c3cd24f
2025-05-18 11:14:27.380 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-982810af-160c-4af1-9bc9-146d2c3cd24f, FunASR会话ID: 982810af-160c-4af1-9bc9-146d2c3cd24f
2025-05-18 11:14:27.380 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:14:27.380 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:14:27.380 [SpringApplicationShutdownHook] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1001, 原因: The web application is stopping, 当前连接数: 0
2025-05-18 11:14:27.400 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LangChain4j LLM服务已关闭
2025-05-18 11:14:27.400 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务已关闭
2025-05-18 11:14:32.932 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 11:14:32.948 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 11091 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 11:14:32.948 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 11:14:32.948 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 11:14:33.314 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 11:14:33.317 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 11:14:33.318 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 11:14:33.318 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 11:14:33.361 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 11:14:33.361 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 394 ms
2025-05-18 11:14:33.380 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 11:14:33.467 [main] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务初始化完成, 服务器地址: ws://192.168.0.103:10096
2025-05-18 11:14:33.470 [main] INFO  c.r.s.e.lm.LargeLanguageModelClient - 初始化大语言模型客户端, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:14:33.485 [main] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM服务初始化完成, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:14:33.555 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-05-18 11:14:33.602 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-18 11:14:33.618 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/robotplatform'
2025-05-18 11:14:33.622 [main] INFO  c.r.start.RobotPlatformApplication - Started RobotPlatformApplication in 0.928 seconds (process running for 1.163)
2025-05-18 11:14:33.686 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 11:14:33.686 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 11:14:33.686 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-05-18 11:14:33.709 [http-nio-8080-exec-1] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:14:33.908 [http-nio-8080-exec-2] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: c478300f-8b0d-4067-b693-47abc1f23e46, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-c478300f-8b0d-4067-b693-47abc1f23e46","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"hello world\":40,\"阿里巴巴\":20}"}
2025-05-18 11:14:33.909 [http-nio-8080-exec-2] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-c478300f-8b0d-4067-b693-47abc1f23e46, FunASR会话ID: c478300f-8b0d-4067-b693-47abc1f23e46
2025-05-18 11:14:33.909 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-c478300f-8b0d-4067-b693-47abc1f23e46
2025-05-18 11:14:37.051 [http-nio-8080-exec-5] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_111433.wav, 总数据大小: 111592 字节
2025-05-18 11:14:37.052 [http-nio-8080-exec-5] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: c478300f-8b0d-4067-b693-47abc1f23e46
2025-05-18 11:14:37.052 [http-nio-8080-exec-5] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-c478300f-8b0d-4067-b693-47abc1f23e46, FunASR会话ID: c478300f-8b0d-4067-b693-47abc1f23e46
2025-05-18 11:14:37.052 [http-nio-8080-exec-5] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:14:37.053 [http-nio-8080-exec-5] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:14:37.053 [http-nio-8080-exec-5] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1000, 原因: 页面关闭, 当前连接数: 0
2025-05-18 11:14:37.303 [http-nio-8080-exec-7] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:14:39.261 [http-nio-8080-exec-9] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: d29548dd-e2bd-4420-8ab5-9f19327058eb, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-d29548dd-e2bd-4420-8ab5-9f19327058eb","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"hello world\":40,\"阿里巴巴\":20}"}
2025-05-18 11:14:39.261 [http-nio-8080-exec-9] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-d29548dd-e2bd-4420-8ab5-9f19327058eb, FunASR会话ID: d29548dd-e2bd-4420-8ab5-9f19327058eb
2025-05-18 11:14:39.262 [http-nio-8080-exec-9] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-d29548dd-e2bd-4420-8ab5-9f19327058eb
2025-05-18 11:14:46.154 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=你好，请帮我处理违章
2025-05-18 11:14:46.587 [WebSocketClient-AsyncIO-10] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
你好，请帮我处理违章, 输出：处理交通违法记录
2025-05-18 11:14:46.588 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 你好，请帮我处理违章, 优化后: 处理交通违法记录
2025-05-18 11:14:47.726 [pool-4-thread-1] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录, 输出：您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！
2025-05-18 11:14:47.727 [pool-4-thread-1] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录

助手: 您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！, 响应: 您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！
2025-05-18 11:14:47.727 [pool-4-thread-1] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！
2025-05-18 11:14:47.730 [pool-4-thread-1] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！, 说话人ID: 中文女, sessionId:voice
2025-05-18 11:14:47.800 [SimpleAsyncTaskExecutor-1] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已建立, 会话ID: cosyvoice-1747538087730
2025-05-18 11:14:55.324 [WebSocketClient-AsyncIO-9] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已关闭, 会话ID: cosyvoice-1747538087730, 状态: CloseStatus[code=1000, reason=null]
2025-05-18 11:15:44.441 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=嗯
2025-05-18 11:15:44.443 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 语音内容过短，忽略结果, 会话ID: voice
2025-05-18 11:15:49.681 [WebSocketClient-AsyncIO-2] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=，请帮我转人工
2025-05-18 11:15:50.020 [WebSocketClient-AsyncIO-2] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
请帮我转人工, 输出：转为人工服务
2025-05-18 11:15:50.021 [WebSocketClient-AsyncIO-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 请帮我转人工, 优化后: 转为人工服务
2025-05-18 11:15:50.508 [pool-4-thread-2] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录

助手: 您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！

用户: 转为人工服务, 输出：好的，我将为您转接至人工服务，请稍候。
2025-05-18 11:15:50.509 [pool-4-thread-2] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录

助手: 您好！关于处理交通违法记录，您可以携带本人有效身份证件及车辆行驶证前往当地交警大队或通过“交管12123”APP在线办理。如需进一步帮助，请咨询人工服务。感谢您的配合！

用户: 转为人工服务

助手: 好的，我将为您转接至人工服务，请稍候。, 响应: 好的，我将为您转接至人工服务，请稍候。
2025-05-18 11:15:50.509 [pool-4-thread-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 好的，我将为您转接至人工服务，请稍候。
2025-05-18 11:15:50.510 [pool-4-thread-2] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 好的，我将为您转接至人工服务，请稍候。, 说话人ID: 中文女, sessionId:voice
2025-05-18 11:15:50.571 [SimpleAsyncTaskExecutor-1] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已建立, 会话ID: cosyvoice-1747538150510
2025-05-18 11:15:52.593 [WebSocketClient-AsyncIO-10] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已关闭, 会话ID: cosyvoice-1747538150510, 状态: CloseStatus[code=1000, reason=null]
2025-05-18 11:16:11.650 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_111439.wav, 总数据大小: 1389128 字节
2025-05-18 11:16:11.650 [SpringApplicationShutdownHook] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: d29548dd-e2bd-4420-8ab5-9f19327058eb
2025-05-18 11:16:11.650 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-d29548dd-e2bd-4420-8ab5-9f19327058eb, FunASR会话ID: d29548dd-e2bd-4420-8ab5-9f19327058eb
2025-05-18 11:16:11.650 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:16:11.650 [SpringApplicationShutdownHook] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:16:11.650 [SpringApplicationShutdownHook] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1001, 原因: The web application is stopping, 当前连接数: 0
2025-05-18 11:16:11.658 [SpringApplicationShutdownHook] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LangChain4j LLM服务已关闭
2025-05-18 11:16:11.658 [SpringApplicationShutdownHook] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务已关闭
2025-05-18 11:16:14.083 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-05-18 11:16:14.099 [main] INFO  c.r.start.RobotPlatformApplication - Starting RobotPlatformApplication using Java 23.0.1 with PID 11225 (/Volumes/ExtData/Documents/codes/RobotPlatform/robotplatform-start/target/classes started by shixuan.lzq in /Volumes/ExtData/Documents/codes/RobotPlatform)
2025-05-18 11:16:14.100 [main] DEBUG c.r.start.RobotPlatformApplication - Running with Spring Boot v3.1.5, Spring v6.0.13
2025-05-18 11:16:14.100 [main] INFO  c.r.start.RobotPlatformApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-18 11:16:14.472 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-18 11:16:14.475 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-18 11:16:14.476 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-18 11:16:14.476 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.15]
2025-05-18 11:16:14.512 [main] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring embedded WebApplicationContext
2025-05-18 11:16:14.513 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 393 ms
2025-05-18 11:16:14.531 [main] INFO  c.r.web.config.FileConfig - 日志目录已存在: /Volumes/ExtData/Documents/codes/RobotPlatform/./log
2025-05-18 11:16:14.612 [main] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - FunASR语音识别服务初始化完成, 服务器地址: ws://192.168.0.103:10096
2025-05-18 11:16:14.615 [main] INFO  c.r.s.e.lm.LargeLanguageModelClient - 初始化大语言模型客户端, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:16:14.634 [main] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM服务初始化完成, 服务器地址: http://192.168.0.103:11434, 模型: qwen2.5:14b
2025-05-18 11:16:14.703 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page: class path resource [static/index.html]
2025-05-18 11:16:14.747 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-18 11:16:14.765 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path '/robotplatform'
2025-05-18 11:16:14.770 [main] INFO  c.r.start.RobotPlatformApplication - Started RobotPlatformApplication in 0.915 seconds (process running for 1.135)
2025-05-18 11:16:14.833 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[.[.[/robotplatform] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-18 11:16:14.833 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-18 11:16:14.833 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-05-18 11:16:14.855 [http-nio-8080-exec-1] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:16:15.037 [http-nio-8080-exec-2] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: 290760ac-18d2-4d27-8803-e964a5152a0a, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-290760ac-18d2-4d27-8803-e964a5152a0a","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"hello world\":40,\"阿里巴巴\":20}"}
2025-05-18 11:16:15.037 [http-nio-8080-exec-2] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-290760ac-18d2-4d27-8803-e964a5152a0a, FunASR会话ID: 290760ac-18d2-4d27-8803-e964a5152a0a
2025-05-18 11:16:15.038 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-290760ac-18d2-4d27-8803-e964a5152a0a
2025-05-18 11:16:20.226 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 已更新WAV文件头, 文件: audio_records/voice_20250518_111615.wav, 总数据大小: 126984 字节
2025-05-18 11:16:20.227 [http-nio-8080-exec-2] INFO  c.r.s.external.funasr.FunasrClient - 关闭FunASR连接, 会话ID: 290760ac-18d2-4d27-8803-e964a5152a0a
2025-05-18 11:16:20.228 [http-nio-8080-exec-2] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 关闭FunASR会话, 会话ID: asr-290760ac-18d2-4d27-8803-e964a5152a0a, FunASR会话ID: 290760ac-18d2-4d27-8803-e964a5152a0a
2025-05-18 11:16:20.228 [http-nio-8080-exec-2] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - 清除会话上下文, 会话ID: voice
2025-05-18 11:16:20.228 [http-nio-8080-exec-2] INFO  c.r.s.impl.VoiceDialogServiceImpl - 重置会话状态, 会话ID: voice
2025-05-18 11:16:20.228 [http-nio-8080-exec-2] INFO  c.r.w.w.VoiceDialogWebSocketHandler - WebSocket连接关闭, 会话ID: voice, 状态码: 1000, 原因: 页面关闭, 当前连接数: 0
2025-05-18 11:16:20.421 [http-nio-8080-exec-4] INFO  c.r.w.w.VoiceDialogWebSocketHandler - 新的WebSocket连接建立, 会话ID: voice, 当前连接数: 1
2025-05-18 11:16:21.839 [http-nio-8080-exec-8] INFO  c.r.s.external.funasr.FunasrClient - 创建FunASR连接成功, 会话ID: bf45207b-c98a-43b4-8b70-1fb05d42c9f3, 初始配置: {"chunk_size":[5,10,5],"wav_name":"websocket-bf45207b-c98a-43b4-8b70-1fb05d42c9f3","is_speaking":true,"chunk_interval":10,"itn":true,"mode":"2pass","hotwords":"{\"hello world\":40,\"阿里巴巴\":20}"}
2025-05-18 11:16:21.840 [http-nio-8080-exec-8] INFO  c.r.s.i.FunASRSpeechToTextServiceImpl - 创建FunASR会话, 会话ID: asr-bf45207b-c98a-43b4-8b70-1fb05d42c9f3, FunASR会话ID: bf45207b-c98a-43b4-8b70-1fb05d42c9f3
2025-05-18 11:16:21.840 [http-nio-8080-exec-8] INFO  c.r.s.impl.VoiceDialogServiceImpl - 创建语音识别会话, 对话会话ID: voice, ASR会话ID: asr-bf45207b-c98a-43b4-8b70-1fb05d42c9f3
2025-05-18 11:16:30.537 [WebSocketClient-AsyncIO-10] DEBUG c.r.s.external.funasr.FunasrClient - 收到FunASR消息, mode=2pass-offline, text=你好，请帮我处理违章
2025-05-18 11:16:30.928 [WebSocketClient-AsyncIO-10] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 
请优化以下输入：
你好，请帮我处理违章, 输出：处理交通违法记录
2025-05-18 11:16:30.929 [WebSocketClient-AsyncIO-10] INFO  c.r.s.impl.VoiceDialogServiceImpl - 用户输入优化, 原始输入: 你好，请帮我处理违章, 优化后: 处理交通违法记录
2025-05-18 11:16:33.013 [pool-4-thread-1] INFO  c.r.s.e.lm.LargeLanguageModelClient - 调用大语言模型进行对话 ,提示词: 

用户: 处理交通违法记录, 输出：您好！处理交通违法记录可以通过以下方式：

1. **线上办理**：登录“交管12123”APP或访问当地车管所官方网站进行查询和处理。
2. **现场办理**：携带本人有效身份证件、驾驶证及车辆行驶证前往就近的交警大队或者车管所服务窗口。

请您根据自己的情况选择合适的方式进行操作。如果您需要进一步的帮助，可以告诉我具体的问题细节，我会尽力提供帮助。
2025-05-18 11:16:33.014 [pool-4-thread-1] INFO  c.r.s.i.OllamaLanguageModelServiceImpl - LLM响应完成, 会话ID: voice, 提示词: 

用户: 处理交通违法记录

助手: 您好！处理交通违法记录可以通过以下方式：

1. **线上办理**：登录“交管12123”APP或访问当地车管所官方网站进行查询和处理。
2. **现场办理**：携带本人有效身份证件、驾驶证及车辆行驶证前往就近的交警大队或者车管所服务窗口。

请您根据自己的情况选择合适的方式进行操作。如果您需要进一步的帮助，可以告诉我具体的问题细节，我会尽力提供帮助。, 响应: 您好！处理交通违法记录可以通过以下方式：

1. **线上办理**：登录“交管12123”APP或访问当地车管所官方网站进行查询和处理。
2. **现场办理**：携带本人有效身份证件、驾驶证及车辆行驶证前往就近的交警大队或者车管所服务窗口。

请您根据自己的情况选择合适的方式进行操作。如果您需要进一步的帮助，可以告诉我具体的问题细节，我会尽力提供帮助。
2025-05-18 11:16:33.014 [pool-4-thread-1] INFO  c.r.s.impl.VoiceDialogServiceImpl - 生成语音回复, 会话ID: voice, 文本信息: 您好！处理交通违法记录可以通过以下方式：

1. **线上办理**：登录“交管12123”APP或访问当地车管所官方网站进行查询和处理。
2. **现场办理**：携带本人有效身份证件、驾驶证及车辆行驶证前往就近的交警大队或者车管所服务窗口。

请您根据自己的情况选择合适的方式进行操作。如果您需要进一步的帮助，可以告诉我具体的问题细节，我会尽力提供帮助。
2025-05-18 11:16:33.017 [pool-4-thread-1] INFO  c.r.s.i.CosyVoiceTextToSpeechServiceImpl - 合成语音, 文本: 您好！处理交通违法记录可以通过以下方式：

1. **线上办理**：登录“交管12123”APP或访问当地车管所官方网站进行查询和处理。
2. **现场办理**：携带本人有效身份证件、驾驶证及车辆行驶证前往就近的交警大队或者车管所服务窗口。

请您根据自己的情况选择合适的方式进行操作。如果您需要进一步的帮助，可以告诉我具体的问题细节，我会尽力提供帮助。, 说话人ID: 中文女,sessionId:voice
2025-05-18 11:16:33.072 [SimpleAsyncTaskExecutor-1] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已建立, 会话ID: cosyvoice-1747538193018
2025-05-18 11:16:46.864 [WebSocketClient-AsyncIO-5] INFO  c.r.s.e.cosyvoice.CosyVoiceClient - WebSocket连接已关闭, 会话ID: cosyvoice-1747538193018, 状态: CloseStatus[code=1000, reason=null]
